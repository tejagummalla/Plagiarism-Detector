/*! angular-uploads v. 1.0.3 2016-02-15 */
var msl_upload=angular.module("msl.uploads",[]);msl_upload.directive("mslFileInput",function(){return{restrict:"A",link:function(a,b,c){var d=c.mslFileInput;if(!d)throw"msl-file-input: You should specify a file selection handler";if(!a[d])throw"msl-file-input: The specified handler doesn't exist in your scope";b.removeAttr("multiple"),b.append('<input type="file" '+(c.multiple?"multiple":"")+' style="display: none;">');var e=b.children().eq(-1);e.bind("change",function(b){var c=b.target.files;a.$apply(function(){a[d](c),b.target.value=null})}),b.bind("click",function(a){e[0].click()})}}}),msl_upload.directive("mslFolderInput",function(){function a(){var a=document.createElement("input");return"webkitdirectory"in a}return{restrict:"A",link:function(b,c,d){var e=d.mslFolderInput;if(!e)throw"msl-folder-input: You should specify a folder selection handler";if(!b[e])throw"msl-folder-input: The specified handler doesn't exist in your scope";if(a()){c.append('<input type="file" webkitdirectory style="display: none;">');var f=c.children().eq(-1);f.bind("change",function(a){var c=a.target.files;b.$apply(function(){b[e](c),a.target.value=null})}),c.bind("click",function(a){f[0].click()})}else c.prop("disabled",!0)}}}),msl_upload.directive("mslDndFileInput",function(){return{restrict:"A",link:function(a,b,c){var d=c.mslDndFileInput;if(!d)throw"msl-dnd-file-input: You should specify a file selection handler";if(!a[d])throw"msl-dnd-file-input: The specified handler doesn't exist in your scope";b.bind("dragover",function(a){a.preventDefault(),b.addClass("msl-drag-over")}),b.bind("dragleave",function(a){b.removeClass("msl-drag-over")}),b.bind("drop",function(d){d.preventDefault(),b.removeClass("msl-drag-over");var e=c.mslDndFileInput,f=d.dataTransfer.files;a.$apply(function(){a[e](f)})})}}}),msl_upload.directive("mslDndFolderInput",function(){function a(){var a=document.createElement("input");return"webkitdirectory"in a}return{restrict:"A",link:function(b,c,d){function e(a){if(a.isFile)a.file(function(a){b.$apply(function(){b[f]([a])})});else if(a.isDirectory){var c=a.createReader();c.readEntries(function(a){for(var b=0;b<a.length;b++){var c=a[b];e(c)}})}}var f=d.mslDndFolderInput;if(!f)throw"msl-dnd-folder-input: You should specify a folder selection handler";if(!b[f])throw"msl-dnd-folder-input: The specified handler doesn't exist in your scope";c.bind("dragover",function(a){a.preventDefault(),c.addClass("msl-drag-over")}),c.bind("dragleave",function(a){c.removeClass("msl-drag-over")}),c.bind("drop",function(d){if(d.preventDefault(),c.removeClass("msl-drag-over"),a())for(var g=d.dataTransfer.items,h=0;h<g.length;h++){var i=g[h].webkitGetAsEntry();e(i)}else{var j=d.dataTransfer.files;b.$apply(function(){b[f](j)})}})}}}),msl_upload.directive("mslDndItem",function(){return{restrict:"A",link:function(a,b,c){var d=c.mslDndItem;if(!d)throw"msl-dnd-item: You should specify a scope variable";var e=a[d];if(!e)throw"msl-dnd-item: The specified scope variable doesn't exist";b.prop("draggable",!0),b.bind("dragstart",function(a){var b=JSON.stringify(e);a.dataTransfer.setData("text",b)})}}}),msl_upload.directive("mslDndTarget",function(){return{restrict:"A",link:function(a,b,c){var d=c.mslDndTarget;if(!d)throw"msl-dnd-target: You should specify a drop handler";if(!a[d])throw"msl-dnd-target: The specified handler doesn't exist in your scope";b.bind("dragover",function(a){a.preventDefault(),b.addClass("msl-drag-over")}),b.bind("dragleave",function(a){b.removeClass("msl-drag-over")}),b.bind("drop",function(c){b.removeClass("msl-drag-over");var e=c.dataTransfer.getData("text"),f=JSON.parse(e);a.$apply(function(){a[d](f)})})}}});